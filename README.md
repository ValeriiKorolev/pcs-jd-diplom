# Дипломная работа. Поисковая система

Разработать класс поискового движка, который способен быстро находить указанное слово среди pdf-файлов, причём ранжировать результаты по количеству вхождений. Также необходимо реализовать сервер, который обслуживает входящие запросы с помощью этого движка. 

## PDF
Папка `pdfs` - в ней находятся .pdf-файлы, по которым будет искать поисковый движок.

![image](https://user-images.githubusercontent.com/53707586/152980485-675392c1-4d98-4e22-abdc-7a85678f53a7.png)

Для работы с пдф мы будем использовать библиотеку `com.itextpdf:itext7-core:7.1.15`:
```xml
        <dependency>
            <groupId>com.itextpdf</groupId>
            <artifactId>itext7-core</artifactId>
            <version>7.1.15</version>
            <type>pom</type>
        </dependency>
```

Основные инструменты из этой библиотеки будут выглядеть следующим образом:
  - Чтобы создать объект пдф-документа, нужно указать объект `File` этого документа следующим классам: `var doc = new PdfDocument(new PdfReader(pdf));`.
  - Получить объект одной страницы документа - `doc.getPage(номерСтраницы)`. 
  - Получить текст со страницы - `var text = PdfTextExtractor.getTextFromPage(page);`.
  - Разбить текст на слова (а они в этих документах разделены могут быть не только пробелами) - `var words = text.split("\\P{IsAlphabetic}+");`.

## Классы
  - **PageEntry** -  Класс, описывающий один элемент результата одного поиска. Он состоит из имени пдф-файла, номера страницы и количества раз, которое встретилось это слово на ней
  - **SearchEngine** - Интерфейс, описывающий поисковый движок. Всё что должен уметь делать поисковый движок, это на запрос из слова отвечать списком элементов результата ответа
  - **BooleanSearchEngine** - Реализация поискового движка. Слово `Boolean` пришло из теории информационного поиска, тк наш движок будет искать в тексте ровно то слово, которое было указано, без использования синонимов и прочих приёмов нечётного поиска

## Индексация и поиск
Чтобы поиск работал быстро, предпочтём сканирование всех пдф-ок в конструкторе класса **BooleanSearchEngine** с сохранением информации для каждого слова, чтобы метод `search` отрабатывал быстро, по сути возвращая уже посчитанный в конструкторе для слова ответ. Т.е. в конструкторе для каждого слова нужно сохранить готовый на возможный будущий запрос ответ `List<PageEntry>` (для этого можно использовать мапу, где ключом будет слово, а значением - поисковый ответ для него). Такое предварительное сканирование файлов по которым мы будем искать называется _индексацией_.

Нужно реализовать логику индексации в конструкторе. Сканируя каждый пдф-файл перебираем его страницы, для каждой страницы извлекаем из неё слова и подсчитываете их количество. После чего, для каждого уникального слова создаём объект `PageEntry` и сохраняем. Должен быть регистронезависимый поиск, т.е. по слову "бизнес" должны учитываться и "бизнес", и "Бизнес" в документах.

Для подсчёта частоты слов используем следующий приём:
```java
Map<String, Integer> freqs = new HashMap<>();
for (var word : words) {
    if (word.isEmpty()) {
        continue;
    }
    freqs.put(word.toLowerCase(), freqs.getOrDefault(word, 0) + 1);
}
```

Также, списки ответов для каждого слова должны быть отсортированы в порядке уменьшения поля `count`. Для этого предлагается классу `PageEntry` сразу реализовывать интерфейс `Comparable`.

После реализации протестировать работу движка в `Main`. Пример работы на слове "бизнес":
```
[PageEntry{pdf=Этапы оценки проекта_ понятия, методы и полезные инструменты.pdf, page=12, count=6}, PageEntry{pdf=Этапы оценки проекта_ понятия, методы и полезные инструменты.pdf, page=4, count=3}, PageEntry{pdf=Этапы оценки проекта_ понятия, методы и полезные инструменты.pdf, page=5, count=3}, PageEntry{pdf=1. DevOps_MLops.pdf, page=5, count=2}, PageEntry{pdf=Что такое блокчейн.pdf, page=1, count=2}, PageEntry{pdf=Что такое блокчейн.pdf, page=3, count=2}, PageEntry{pdf=Этапы оценки проекта_ понятия, методы и полезные инструменты.pdf, page=2, count=1}, PageEntry{pdf=Этапы оценки проекта_ понятия, методы и полезные инструменты.pdf, page=11, count=1}, PageEntry{pdf=1. DevOps_MLops.pdf, page=3, count=1}, PageEntry{pdf=1. DevOps_MLops.pdf, page=4, count=1}, PageEntry{pdf=Что такое блокчейн.pdf, page=2, count=1}, PageEntry{pdf=Что такое блокчейн.pdf, page=4, count=1}, PageEntry{pdf=Что такое блокчейн.pdf, page=5, count=1}, PageEntry{pdf=Что такое блокчейн.pdf, page=7, count=1}, PageEntry{pdf=Что такое блокчейн.pdf, page=9, count=1}, PageEntry{pdf=Продвижение игр.pdf, page=7, count=1}, PageEntry{pdf=Как управлять рисками IT-проекта.pdf, page=2, count=1}]
```

## Сервер
В `main` должен запускаться сервер, слушающий порт `8989`, к которому будут происходить подключения и на входной поток подавать одно слово (обозначим как `word`), отвечать результатом вызова метода `search(word)`, но в виде JSON-текста (библиотеку для работы с JSON подключить к `pom.xml`).

Пример ответа на запрос `бизнес`:
```json
[
  {
    "pdfName": "Этапы оценки проекта_ понятия, методы и полезные инструменты.pdf",
    "page": 12,
    "count": 6
  },
  {
    "pdfName": "Этапы оценки проекта_ понятия, методы и полезные инструменты.pdf",
    "page": 4,
    "count": 3
  },
  {
    "pdfName": "Этапы оценки проекта_ понятия, методы и полезные инструменты.pdf",
    "page": 5,
    "count": 3
  },
  {
    "pdfName": "1. DevOps_MLops.pdf",
    "page": 5,
    "count": 2
  },
  {
    "pdfName": "Что такое блокчейн.pdf",
    "page": 1,
    "count": 2
  },
  {
    "pdfName": "Что такое блокчейн.pdf",
    "page": 3,
    "count": 2
  },
  {
    "pdfName": "Этапы оценки проекта_ понятия, методы и полезные инструменты.pdf",
    "page": 2,
    "count": 1
  },
  {
    "pdfName": "Этапы оценки проекта_ понятия, методы и полезные инструменты.pdf",
    "page": 11,
    "count": 1
  },
  {
    "pdfName": "1. DevOps_MLops.pdf",
    "page": 3,
    "count": 1
  },
  {
    "pdfName": "1. DevOps_MLops.pdf",
    "page": 4,
    "count": 1
  },
  {
    "pdfName": "Что такое блокчейн.pdf",
    "page": 2,
    "count": 1
  },
  {
    "pdfName": "Что такое блокчейн.pdf",
    "page": 4,
    "count": 1
  },
  {
    "pdfName": "Что такое блокчейн.pdf",
    "page": 5,
    "count": 1
  },
  {
    "pdfName": "Что такое блокчейн.pdf",
    "page": 7,
    "count": 1
  },
  {
    "pdfName": "Что такое блокчейн.pdf",
    "page": 9,
    "count": 1
  },
  {
    "pdfName": "Продвижение игр.pdf",
    "page": 7,
    "count": 1
  },
  {
    "pdfName": "Как управлять рисками IT-проекта.pdf",
    "page": 2,
    "count": 1
  }
]
```

